services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./.env:/app/.env
      - sqlite_data:/data
      - ./logs:/logs
      - ./app:/app/app
      - ./tests:/app/tests
      - ./tests/coverage:/tmp/coverage
      - ./prompts.py:/app/prompts.py
    command: python app/clients/slack/slack_bot.py
    env_file:
      - .env
    environment:
      - PYTHONUNBUFFERED=1
      - PYTEST_DISABLE_PLUGIN_AUTOLOAD=cacheprovider
      - COVERAGE_FILE=/tmp/coverage/.coverage
    restart: unless-stopped
    init: true

volumes:
  sqlite_data:
    name: slackbot_sqlite_data 